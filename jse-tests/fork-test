#!/bin/jse --shell-script

/**
 * Its possible to fork with jse, but you cannot get any data out of the fork using normal
 * Javascript methods. You will need some form of IPC synchronization if your child processes,
 * need to report back to the main.
 */

loadPlugin("Fork.jso");

var k = new Fork({/* child function scope object */}, function main(){
	/* child function */
	printErrorLine("child: going to sleep for 5 seconds.")
	sleep(5000);
	printErrorLine("child: woke-up; task-complete");
	return;
} /* optional child function main parameters may follow ...*/);

printErrorLine("parent: waiting for child to finish...");

// loadPlugin('Fork.jso') provides this function
wait(k.pid);

printErrorLine("parent: child has finished"); 
